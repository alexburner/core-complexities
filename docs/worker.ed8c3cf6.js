parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"BHXf":[function(require,module,exports) {
"use strict";exports.__esModule=!0,exports.shuffle=function(r){for(var t=r.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),e=r[t];r[t]=r[n],r[n]=e}},exports.each=function(r,t){for(var n=0,e=r.length;n<e;n++)t(r[n],n,r)},exports.map=function(r,t){for(var n=new Array(r.length),e=0,o=r.length;e<o;e++)n[e]=t(r[e],e,r);return n},exports.times=function(r,t){for(var n=new Array(r),e=0;e<r;e++)n[e]=t(e,n);return n},exports.reduce=function(r,t,n){for(var e=0,o=r.length;e<o;e++)n=t(n,r[e],e,r);return n},exports.clamp=function(r,t,n){return Math.max(t,Math.min(n,r))},exports.coinFlip=function(){return Boolean(Math.round(Math.random()))},exports.assertNever=function(r){throw new TypeError("never violation: "+JSON.stringify(r))};
},{}],"uubC":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var t=require("../util"),r=function(t){return function(r,e){for(var n=new Float32Array(r.length),o="number"==typeof e,a=0,u=r.length;a<u;a++){var i=r[a],s=o?e:e[a];n[a]=t(i,s)}return n}};exports.add=r(function(t,r){return t+r}),exports.subtract=r(function(t,r){return t-r}),exports.multiply=r(function(t,r){return t*r}),exports.divide=r(function(t,r){return t/r}),exports.getDistanceSq=function(t,r){var e=exports.subtract(t,r);return exports.getMagnitudeSq(e)},exports.getDistance=function(t,r){return Math.sqrt(exports.getDistanceSq(t,r))},exports.getMagnitudeSq=function(t){for(var r=0,e=0,n=t.length;e<n;e++)r+=t[e]*t[e];return r},exports.getMagnitude=function(t){return Math.sqrt(exports.getMagnitudeSq(t))},exports.setMagnitude=function(t,r){var e=exports.getMagnitude(t);return 0===e?exports.add(t,Math.sqrt(r/t.length)):exports.multiply(t,r/e)},exports.limitMagnitude=function(t,r){var e=r*r,n=exports.getMagnitudeSq(t);return n>e?exports.multiply(t,e/n):t},exports.getAverage=function(t){if(0===t.length)throw new Error("Cannot average zero vectors");for(var r=t.length,e=t[0].length,n=new Float32Array(e),o=0;o<r;o++)for(var a=0;a<e;a++)n[a]=n[a]+t[o][a]/r;return n},exports.radialRandomVector=function(r,e){void 0===e&&(e=1);for(var n=new Float32Array(r),o=e*e,a=0;a<r;a++){var u=Math.random()*Math.sqrt(o);o-=u*u,n[a]=t.coinFlip()?u:-u}return t.shuffle(n),n},exports.backfill=function(t,r){for(var e=new Float32Array(t.length),n=0,o=t.length;n<o;n++)e[n]=n<r.length?r[n]:t[n];return e};
},{"../util":"BHXf"}],"j1Bg":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var t=require("../util"),e=require("./vector-n");exports.getNeighborhood=function(r){return t.map(r,function(n){var i=[];return t.each(r,function(t,r){if(n!==t){var i=e.subtract(n.position,t.position);return{index:r,delta:i,distance:e.getMagnitude(i)}}}),i.sort(function(t,e){return t.distance-e.distance}),i})};
},{"../util":"BHXf","./vector-n":"uubC"}],"33s5":[function(require,module,exports) {
"use strict";exports.__esModule=!0,exports.toParticle=function(e){var i=e.dimensions,t=e.position,r=e.velocity,n=e.acceleration;return{dimensions:i,position:o(t),velocity:o(r),acceleration:o(n)}};var o=function(o){for(var e=0,i=[];void 0!==o[e];)i[e]=o[e],e++;return new Float32Array(i)};
},{}],"OZOR":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e=require("../../particle/vector-n"),t=require("../../util");exports.orbits=function(i,a,r){var c=r.distance.min*r.distance.min,n=r.distance.max*r.distance.max,s=r.mass;t.each(i,function(i){var a=e.multiply(i.position,-1),o=t.clamp(e.getMagnitudeSq(a),c,n),d=s.g*s.attractor*s.orbiter/o;a=e.setMagnitude(a,d),a=e.divide(a,r.mass.orbiter),i.acceleration=e.add(i.acceleration,a)})};
},{"../../particle/vector-n":"uubC","../../util":"BHXf"}],"YwtD":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var r,e=require("./orbits");!function(r){r.Orbits="orbits"}(r=exports.BehaviorNames||(exports.BehaviorNames={}));var o={orbits:e.orbits};exports.behavior=function(r,e,s){return o[s.name](r,e,s.config)};
},{"./orbits":"OZOR"}],"EOmG":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e=require("../../particle/vector-n"),t=require("../../util");exports.centerScaling=function(i,r){if(!(i.length<1)){var n=r*r,o=t.reduce(i,function(t,i){return Math.max(t,e.getMagnitudeSq(i.position))},0);if(!(o<=n)){var u=n/o;t.each(i,function(t){return t.position=e.multiply(t.position,u)})}}};
},{"../../particle/vector-n":"uubC","../../util":"BHXf"}],"NuHD":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e,n=require("./centerScaling");!function(e){e.CenterScaling="centerScaling"}(e=exports.BoundingNames||(exports.BoundingNames={}));var r={centerScaling:n.centerScaling};exports.bounding=function(e,n,t){return r[t](e,n)};
},{"./centerScaling":"EOmG"}],"bZCJ":[function(require,module,exports) {
"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(i){for(var e,t=1,o=arguments.length;t<o;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}).apply(this,arguments)};exports.__esModule=!0;var e=require("../particle/neighbors"),t=require("../particle/vector-n"),o=require("../util"),r=require("./behavior/behavior"),n=require("./bounding/bounding"),a={behaviorSpec:{name:r.BehaviorNames.Orbits,config:{mass:{g:1,orbiter:10,attractor:30},distance:{min:50,max:250}}},boundingName:n.BoundingNames.CenterScaling,max:{force:1,speed:1,radius:50}},c=function(){function c(){this.particles=[],this.neighborhood=[],this.config=a}return c.prototype.init=function(e,t,o){void 0===o&&(o={}),this.particles=e,this.neighborhood=t,this.config=i({},this.config,o)},c.prototype.tick=function(){var i=this.particles,a=this.neighborhood,c=this.config;o.each(i,function(i){return i.acceleration=t.multiply(i.acceleration,0)}),r.behavior(i,a,c.behaviorSpec),o.each(i,function(i){i.velocity=t.add(i.velocity,i.acceleration),i.velocity=t.limitMagnitude(i.velocity,c.max.speed),i.position=t.add(i.position,i.velocity)}),n.bounding(i,c.max.radius,c.boundingName),this.neighborhood=e.getNeighborhood(i)},c.prototype.getData=function(){return{particles:this.particles,neighborhood:this.neighborhood}},c}();exports.Simulation=c;
},{"../particle/neighbors":"j1Bg","../particle/vector-n":"uubC","../util":"BHXf","./behavior/behavior":"YwtD","./bounding/bounding":"NuHD"}],"0INl":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e=require("../particle/neighbors"),t=require("../particle/particle-msg"),r=require("../util"),i=require("./Simulation"),a=self,s=new i.Simulation,c=function(e){return a.postMessage(JSON.stringify(e))};a.addEventListener("message",function(i){var n=JSON.parse(i.data);switch(n.type){case"init":var o=r.map(n.particles,t.toParticle),u=e.getNeighborhood(o);s.init(o,u,n.config);break;case"tick":s.tick(),c(s.getData());break;case"destroy":a.close();break;default:r.assertNever(n)}});
},{"../particle/neighbors":"j1Bg","../particle/particle-msg":"33s5","../util":"BHXf","./Simulation":"bZCJ"}]},{},["0INl"], null)
//# sourceMappingURL=/worker.7633c4d8.map