parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"BHXf":[function(require,module,exports) {
"use strict";exports.__esModule=!0,exports.shuffle=function(r){for(var t=r.length-1;t>0;t--){var e=Math.floor(Math.random()*(t+1)),n=r[t];r[t]=r[e],r[e]=n}},exports.each=function(r,t){for(var e=0,n=r.length;e<n;e++)t(r[e],e,r)},exports.map=function(r,t){for(var e=new Array(r.length),n=0,o=r.length;n<o;n++)e[n]=t(r[n],n,r);return e},exports.times=function(r,t){for(var e=new Array(r),n=0;n<r;n++)e[n]=t(n,e);return e},exports.reduce=function(r,t,e){for(var n=0,o=r.length;n<o;n++)e=t(e,r[n],n,r);return e},exports.clamp=function(r,t,e){return Math.max(t,Math.min(e,r))},exports.coinFlip=function(){return Math.random()<.5},exports.assertNever=function(r){throw new TypeError("never violation: "+JSON.stringify(r))};
},{}],"hdP5":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var t=require("../util"),r=function(t){return function(r,e){for(var n=new Float32Array(r.length),o="number"==typeof e,a=0,u=r.length;a<u;a++){var i=r[a],s=o?e:e[a];n[a]=t(i,s)}return n}};exports.add=r(function(t,r){return t+r}),exports.subtract=r(function(t,r){return t-r}),exports.multiply=r(function(t,r){return t*r}),exports.divide=r(function(t,r){return t/r}),exports.getDistanceSq=function(t,r){var e=exports.subtract(t,r);return exports.getMagnitudeSq(e)},exports.getDistance=function(t,r){return Math.sqrt(exports.getDistanceSq(t,r))},exports.getMagnitudeSq=function(t){for(var r=0,e=0,n=t.length;e<n;e++)r+=t[e]*t[e];return r},exports.getMagnitude=function(t){return Math.sqrt(exports.getMagnitudeSq(t))},exports.setMagnitude=function(t,r){var e=exports.getMagnitude(t);return 0===e?exports.add(t,Math.sqrt(r/t.length)):exports.multiply(t,r/e)},exports.limitMagnitude=function(t,r){var e=r*r,n=exports.getMagnitudeSq(t);return n>e?exports.multiply(t,e/n):t},exports.getAverage=function(t){if(0===t.length)throw new Error("Cannot average zero vectors");for(var r=t.length,e=t[0].length,n=new Float32Array(e),o=0;o<r;o++)for(var a=0;a<e;a++)n[a]=n[a]+t[o][a]/r;return n},exports.radialRandomVector=function(r,e){void 0===e&&(e=1);for(var n=new Float32Array(r),o=e*e,a=0;a<r;a++){var u=Math.random()*Math.sqrt(o);o-=u*u,n[a]=t.coinFlip()?u:-u}return t.shuffle(n),n},exports.backfill=function(t,r){for(var e=new Float32Array(t.length),n=0,o=t.length;n<o;n++)e[n]=n<r.length?r[n]:t[n];return e};
},{"../util":"BHXf"}],"OZOR":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e=require("../../util"),t=require("../vector-n");exports.orbits=function(i,a,r){var n=r.distance.min*r.distance.min,s=r.distance.max*r.distance.max,c=r.mass;e.each(i,function(i){var a=t.multiply(i.position,-1),o=e.clamp(t.getMagnitudeSq(a),n,s),d=c.g*c.attractor*c.orbiter/o;a=t.setMagnitude(a,d),a=t.divide(a,r.mass.orbiter),i.acceleration=t.add(i.acceleration,a)})};
},{"../../util":"BHXf","../vector-n":"hdP5"}],"YwtD":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var r,e=require("./orbits");!function(r){r.Orbits="orbits"}(r=exports.BehaviorNames||(exports.BehaviorNames={}));var o={orbits:e.orbits};exports.behavior=function(r,e,s){return o[s.name](r,e,s.config)};
},{"./orbits":"OZOR"}],"EOmG":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e=require("../../util"),t=require("./../vector-n");exports.centerScaling=function(i,r){if(!(i.length<1)){var n=r*r,o=e.reduce(i,function(e,i){return Math.max(e,t.getMagnitudeSq(i.position))},0);if(!(o<=n)){var u=n/o;e.each(i,function(e){return e.position=t.multiply(e.position,u)})}}};
},{"../../util":"BHXf","./../vector-n":"hdP5"}],"NuHD":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e,n=require("./centerScaling");!function(e){e.CenterScaling="centerScaling"}(e=exports.BoundingNames||(exports.BoundingNames={}));var r={centerScaling:n.centerScaling};exports.bounding=function(e,n,t){return r[t](e,n)};
},{"./centerScaling":"EOmG"}],"4T1d":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var t=require("../util"),e=require("./vector-n");exports.getNeighborhood=function(r){return t.map(r,function(n){var i=[];return t.each(r,function(t,r){if(n!==t){var i=e.subtract(n.position,t.position);return{index:r,delta:i,distance:e.getMagnitude(i)}}}),i.sort(function(t,e){return t.distance-e.distance}),i})};
},{"../util":"BHXf","./vector-n":"hdP5"}],"HKAS":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e=require("../util"),a=require("./behavior/behavior"),i=require("./bounding/bounding"),t=require("./neighbors"),o=require("./vector-n"),r=self,n={behaviorSpec:{name:a.BehaviorNames.Orbits,config:{mass:{g:1,orbiter:10,attractor:30},distance:{min:50,max:250}}},boundingName:i.BoundingNames.CenterScaling,max:{force:1,speed:1,radius:50}},c={config:n,data:{particles:[],neighborhood:[]}},s=function(e){return e&&"string"==typeof e.type};r.addEventListener("message",function(a){var i=a.data;if(s(i))switch(i.type){case"init":c.config=i.config||n,c.data.particles=i.particles,c.data.neighborhood=t.getNeighborhood(i.particles);break;case"tick":d(),r.postMessage(c.data);break;case"destroy":r.close();break;default:e.assertNever(i)}});var d=function(){e.each(c.data.particles,function(e){return e.acceleration=o.multiply(e.acceleration,0)}),a.behavior(c.data.particles,c.data.neighborhood,c.config.behaviorSpec),e.each(c.data.particles,function(e){e.velocity=o.add(e.velocity,e.acceleration),e.velocity=o.limitMagnitude(e.velocity,c.config.max.speed),e.position=o.add(e.position,e.velocity)}),i.bounding(c.data.particles,c.config.max.radius,c.config.boundingName),c.data.neighborhood=t.getNeighborhood(c.data.particles)};
},{"../util":"BHXf","./behavior/behavior":"YwtD","./bounding/bounding":"NuHD","./neighbors":"4T1d","./vector-n":"hdP5"}]},{},["HKAS"], null)
//# sourceMappingURL=/simulation-worker.c41ec7f8.map