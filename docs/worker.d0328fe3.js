parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"BHXf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shuffle=function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}},exports.each=function(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r,t)},exports.times=function(t,e){for(var r=new Array(t),n=0;n<t;n++)r[n]=e(n,r);return r},exports.map=function(t,e){for(var r=new Array(t.length),n=0,o=t.length;n<o;n++)r[n]=e(t[n],n,t);return r},exports.reduce=function(t,e,r){for(var n=0,o=t.length;n<o;n++)r=e(r,t[n],n,t);return r},exports.clamp=function(t,e,r){return Math.max(e,Math.min(r,t))},exports.coinFlip=function(){return Boolean(Math.round(Math.random()))},exports.assertNever=function(t){throw new TypeError("never violation: "+JSON.stringify(t))};var t=function(){function t(t){this.queue=[],this.limit=t}return t.prototype.add=function(t){this.queue.unshift(t),this.queue.length>this.limit&&this.queue.pop()},t.prototype.values=function(){return this.queue},t}();exports.RecentQueue=t;
},{}],"uubC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util"),r=function(t){return function(r,e){for(var n=new Float32Array(r.length),o="number"==typeof e,u=0,a=r.length;u<a;u++){var i=r[u],s=o?e:e[u];n[u]=t(i,s)}return n}};exports.add=r(function(t,r){return t+r}),exports.subtract=r(function(t,r){return t-r}),exports.multiply=r(function(t,r){return t*r}),exports.divide=r(function(t,r){return t/r}),exports.getDistanceSq=function(t,r){var e=exports.subtract(t,r);return exports.getMagnitudeSq(e)},exports.getDistance=function(t,r){return Math.sqrt(exports.getDistanceSq(t,r))},exports.getMagnitudeSq=function(t){for(var r=0,e=0,n=t.length;e<n;e++)r+=t[e]*t[e];return r},exports.getMagnitude=function(t){return Math.sqrt(exports.getMagnitudeSq(t))},exports.setMagnitude=function(t,r){var e=exports.getMagnitude(t);return 0===e?exports.add(t,Math.sqrt(r/t.length)):exports.multiply(t,r/e)},exports.limitMagnitude=function(t,r){var e=r*r,n=exports.getMagnitudeSq(t);return n>e?exports.multiply(t,e/n):t},exports.getAverage=function(t){if(0===t.length)throw new Error("Cannot average zero vectors");for(var r=t.length,e=t[0].length,n=new Float32Array(e),o=0;o<r;o++)for(var u=0;u<e;u++)n[u]=n[u]+t[o][u]/r;return n},exports.radialRandomVector=function(r,e){void 0===e&&(e=1);for(var n=new Float32Array(r),o=e*e,u=0;u<r;u++){var a=Math.random()*Math.sqrt(o);o-=a*a,n[u]=t.coinFlip()?a:-a}return t.shuffle(n),n},exports.fill=function(t,r){for(var e=new Float32Array(t.length),n=0,o=t.length;n<o;n++)e[n]=n<r.length?r[n]:t[n];return e};
},{"../util":"BHXf"}],"j1Bg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util"),t=require("./vector-n");exports.getNeighborhood=function(r){return e.map(r,function(n){var i=[];return e.each(r,function(e,r){if(n!==e){var i=t.subtract(n.position,e.position);return{index:r,delta:i,distance:t.getMagnitude(i)}}}),i.sort(function(e,t){return e.distance-t.distance}),i})};
},{"../util":"BHXf","./vector-n":"uubC"}],"33s5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toParticle=function(o){var t=o.dimensions,i=o.position,r=o.velocity,n=o.acceleration;return{dimensions:t,position:e(i),velocity:e(r),acceleration:e(n)}};var e=function(e){for(var o=0,t=[];void 0!==e[o];)t[o]=e[o],o++;return new Float32Array(t)};
},{}],"OZOR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../particle/vector-n"),t=require("../../util");exports.orbits=function(i,a,r){var c=r.distance.min*r.distance.min,n=r.distance.max*r.distance.max,s=r.mass;t.each(i,function(i){var a=e.multiply(i.position,-1),o=t.clamp(e.getMagnitudeSq(a),c,n),d=s.g*s.attractor*s.orbiter/o;a=e.setMagnitude(a,d),a=e.divide(a,r.mass.orbiter),i.acceleration=e.add(i.acceleration,a)})};
},{"../../particle/vector-n":"uubC","../../util":"BHXf"}],"YwtD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,r=require("./orbits");!function(e){e.Orbits="orbits"}(e=exports.BehaviorNames||(exports.BehaviorNames={}));var o={orbits:r.orbits};exports.behavior=function(e,r,t){return o[t.name](e,r,t.config)};
},{"./orbits":"OZOR"}],"EOmG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../particle/vector-n"),t=require("../../util");exports.centerScaling=function(i,r){if(!(i.length<1)){var n=r*r,o=t.reduce(i,function(t,i){return Math.max(t,e.getMagnitudeSq(i.position))},0);if(!(o<=n)){var u=n/o;t.each(i,function(t){return t.position=e.multiply(t.position,u)})}}};
},{"../../particle/vector-n":"uubC","../../util":"BHXf"}],"NuHD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=require("./centerScaling");!function(e){e.CenterScaling="centerScaling"}(e=exports.BoundingNames||(exports.BoundingNames={}));var r={centerScaling:n.centerScaling};exports.bounding=function(e,n,t){return r[t](e,n)};
},{"./centerScaling":"EOmG"}],"bZCJ":[function(require,module,exports) {
"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(i){for(var e,t=1,o=arguments.length;t<o;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../particle/neighbors"),t=require("../particle/vector-n"),o=require("../util"),r=require("./behavior/behavior"),n=require("./bounding/bounding"),a={behaviorSpec:{name:r.BehaviorNames.Orbits,config:{mass:{g:1,orbiter:10,attractor:30},distance:{min:50,max:250}}},boundingName:n.BoundingNames.CenterScaling,maxForce:1,maxSpeed:1,radius:1},c=function(){function c(){this.particles=[],this.neighborhood=[],this.config=a}return c.prototype.init=function(e,t,o){void 0===o&&(o={}),this.particles=e,this.neighborhood=t,this.config=i({},this.config,o)},c.prototype.tick=function(){var i=this.particles,a=this.neighborhood,c=this.config;o.each(i,function(i){return i.acceleration=t.multiply(i.acceleration,0)}),r.behavior(i,a,c.behaviorSpec),o.each(i,function(i){i.velocity=t.add(i.velocity,i.acceleration),i.velocity=t.limitMagnitude(i.velocity,c.maxSpeed),i.position=t.add(i.position,i.velocity)}),n.bounding(i,c.radius,c.boundingName),this.neighborhood=e.getNeighborhood(i)},c.prototype.getData=function(){return{particles:this.particles,neighborhood:this.neighborhood}},c}();exports.Simulation=c;
},{"../particle/neighbors":"j1Bg","../particle/vector-n":"uubC","../util":"BHXf","./behavior/behavior":"YwtD","./bounding/bounding":"NuHD"}],"0INl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../particle/neighbors"),t=require("../particle/particle-msg"),r=require("../util"),i=require("./Simulation"),a=self,s=new i.Simulation,c=function(e){return a.postMessage(JSON.stringify(e))};a.addEventListener("message",function(i){var n=JSON.parse(i.data);switch(n.type){case"init":var o=r.map(n.particles,t.toParticle),u=e.getNeighborhood(o);s.init(o,u,n.config);break;case"tick":s.tick(),c(s.getData());break;case"destroy":a.close();break;default:r.assertNever(n)}});
},{"../particle/neighbors":"j1Bg","../particle/particle-msg":"33s5","../util":"BHXf","./Simulation":"bZCJ"}]},{},["0INl"], null)
//# sourceMappingURL=worker.78b51fd7.map